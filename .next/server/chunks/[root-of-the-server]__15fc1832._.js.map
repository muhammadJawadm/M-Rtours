{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/muham/Desktop/Couresera%20Learning/gotur-nextjs-package/new%20theme/turmet-nextjs/src/lib/firebase.ts"],"sourcesContent":["// Import the functions you need from the SDKs you need\r\nimport { initializeApp, getApps } from \"firebase/app\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\nimport { getStorage } from \"firebase/storage\";\r\n\r\n// Your web app's Firebase configuration\r\nconst firebaseConfig = {\r\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\r\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID\r\n};\r\n\r\n// Initialize Firebase only if it hasn't been initialized already\r\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApps()[0];\r\nconst db = getFirestore(app);\r\nconst storage = getStorage(app);\r\n\r\nexport { app, db, storage };\r\n"],"names":[],"mappings":"AAAA,uDAAuD;;;;;;AACvD;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,wCAAwC;AACxC,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAEA,iEAAiE;AACjE,MAAM,MAAM,CAAC,CAAA,GAAA,kLAAA,CAAA,UAAO,AAAD,IAAI,MAAM,GAAG,CAAA,GAAA,kLAAA,CAAA,gBAAa,AAAD,EAAE,kBAAkB,CAAA,GAAA,kLAAA,CAAA,UAAO,AAAD,GAAG,CAAC,EAAE;AAC5E,MAAM,KAAK,CAAA,GAAA,mKAAA,CAAA,eAAY,AAAD,EAAE;AACxB,MAAM,UAAU,CAAA,GAAA,sLAAA,CAAA,aAAU,AAAD,EAAE","debugId":null}},
    {"offset": {"line": 215, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/muham/Desktop/Couresera%20Learning/gotur-nextjs-package/new%20theme/turmet-nextjs/src/app/api/submit-booking/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { collection, addDoc, serverTimestamp } from 'firebase/firestore';\r\nimport { db } from '../../../lib/firebase';\r\n\r\nexport async function POST(request: Request) {\r\n  try {\r\n    const bookingData = await request.json();\r\n    \r\n    // 1. Save to Firebase\r\n    let firestoreId = '';\r\n    try {\r\n      // Create a copy of the data with a timestamp\r\n      const bookingWithTimestamp = {\r\n        ...bookingData,\r\n        submittedAt: serverTimestamp(),\r\n        status: \"new\"\r\n      };\r\n      \r\n      // Add to Firebase\r\n      const docRef = await addDoc(collection(db, \"umrah_bookings\"), bookingWithTimestamp);\r\n      firestoreId = docRef.id;\r\n      console.log('Booking saved to Firebase with ID:', docRef.id);\r\n    } catch (firestoreError) {\r\n      console.error('Error saving to Firebase:', firestoreError);\r\n      // Continue with Google Sheets even if Firebase fails\r\n    }\r\n\r\n    // 2. Send the data to Google Sheets using direct POST to Google Apps Script Web App\r\n    try {\r\n      // The Google Apps Script Web App URL (you need to create this - see instructions below)\r\n      const googleScriptUrl = 'https://script.google.com/macros/s/AKfycbzIh3m2rnHidwO_OlSpODlF-P7WIuosBsmiiftgnqVnijCeyl9j6hurKBpqvrP_n5yp/exec';\r\n      \r\n      // Format the data for the sheet\r\n      const sheetData = {\r\n        timestamp: new Date().toISOString(),\r\n        firebaseId: firestoreId,\r\n        fullName: bookingData.fullName,\r\n        email: bookingData.email,\r\n        phone: bookingData.phone,\r\n        address: bookingData.address || 'Not provided',\r\n        packageName: bookingData.packageName,\r\n        travelDate: bookingData.travelDate,\r\n        numAdults: bookingData.numAdults,\r\n        numChildren: bookingData.numChildren,\r\n        numInfants: bookingData.numInfants,\r\n        departureAirport: bookingData.departureAirport,\r\n        preferredAirline: bookingData.preferredAirline || 'Not specified',\r\n        roomType: bookingData.roomType,\r\n        mealPreference: bookingData.mealPreference,\r\n        addZiyarahMakkah: bookingData.addZiyarahMakkah ? 'Yes' : 'No',\r\n        addZiyarahMadinah: bookingData.addZiyarahMadinah ? 'Yes' : 'No',\r\n        requestDirectFlights: bookingData.requestDirectFlights ? 'Yes' : 'No',\r\n        requestPrivateTransport: bookingData.requestPrivateTransport ? 'Yes' : 'No',\r\n        addTravelInsurance: bookingData.addTravelInsurance ? 'Yes' : 'No',\r\n        specialRequests: bookingData.specialRequests || 'None',\r\n        status: 'New'\r\n      };\r\n      \r\n      // Send data to Google Sheets\r\n      try {\r\n        const sheetsResponse = await fetch(googleScriptUrl, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify(sheetData),\r\n        });\r\n        \r\n        const sheetsResult = await sheetsResponse.text();\r\n        console.log('Google Sheets response:', sheetsResult);\r\n        \r\n        if (!sheetsResponse.ok) {\r\n          console.warn('Google Sheets submission failed:', sheetsResult);\r\n        }\r\n      } catch (sheetsError) {\r\n        console.error('Failed to submit to Google Sheets:', sheetsError);\r\n      }\r\n      \r\n      // Send email notification\r\n      try {\r\n        // Use absolute URL for fetch in server components\r\n        const response = await fetch('http://localhost:3000/api/send-email', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            formType: 'umrahBooking',\r\n            ...bookingData,\r\n            firebaseId\r\n          })\r\n        });\r\n        \r\n        if (!response.ok) {\r\n          console.warn('Email notification failed:', await response.text());\r\n        }\r\n      } catch (emailError) {\r\n        console.error('Failed to send email notification:', emailError);\r\n        // Continue even if email fails\r\n      }\r\n      \r\n      return NextResponse.json({\r\n        success: true,\r\n        message: 'Booking submitted successfully',\r\n        firebaseId: firestoreId\r\n      });\r\n    } catch (error) {\r\n      console.error('Error submitting booking:', error);\r\n      return NextResponse.json(\r\n        { \r\n          success: false,\r\n          message: 'Failed to process booking',\r\n          error: process.env.NODE_ENV === 'development' ? String(error) : undefined\r\n        },\r\n        { status: 500 }\r\n      );\r\n    }\r\n  } catch (error) {\r\n    console.error('Error processing booking submission:', error);\r\n    return NextResponse.json(\r\n      { \r\n        success: false,\r\n        message: 'Failed to process booking',\r\n        error: process.env.NODE_ENV === 'development' ? String(error) : undefined\r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}