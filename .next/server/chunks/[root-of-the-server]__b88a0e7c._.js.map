{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/muham/Desktop/Couresera%20Learning/gotur-nextjs-package/new%20theme/turmet-nextjs/src/app/api/send-email/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport nodemailer from 'nodemailer';\r\n\r\nexport async function POST(request: Request) {\r\n  try {\r\n    const formData = await request.json();\r\n    \r\n    // Create a transporter using SMTP credentials from environment variables\r\n    let transporter;\r\n\r\n    if ( \r\n        process.env.EMAIL_HOST && \r\n        process.env.EMAIL_USER && \r\n        process.env.EMAIL_PASSWORD) {\r\n      // Production configuration\r\n      transporter = nodemailer.createTransport({\r\n        host: process.env.EMAIL_HOST,\r\n        port: Number(process.env.EMAIL_PORT) || 587,\r\n        secure: process.env.EMAIL_SECURE === 'true',\r\n        auth: {\r\n          user: process.env.EMAIL_USER,\r\n          pass: process.env.EMAIL_PASSWORD,\r\n        },\r\n      });\r\n    } else {\r\n      return NextResponse.json(\r\n        { success: false, message: 'Email configuration is missing' },\r\n        { status: 500 }\r\n      );\r\n    }\r\n    \r\n    // The recipient email address\r\n    const toAddress = 'malikjawadkanyal@gmail.com';\r\n    \r\n    // Determine which form was submitted and format email accordingly\r\n    let subject, textContent, htmlContent;\r\n\r\n    if (formData.formType === 'umrahBooking') {\r\n      // Umrah booking form submission\r\n      subject = 'New Umrah Package Booking Request';\r\n      textContent = `\r\n        New Umrah Booking Request:\r\n        \r\n        Customer Details:\r\n        Full Name: ${formData.fullName}\r\n        Email: ${formData.email}\r\n        Phone: ${formData.phone}\r\n        Address: ${formData.address || 'Not provided'}\r\n        \r\n        Package Details:\r\n        Package Name: ${formData.packageName}\r\n        Travel Date: ${formData.travelDate}\r\n        Travelers: ${formData.numAdults} adults, ${formData.numChildren} children, ${formData.numInfants} infants\r\n        Departure Airport: ${formData.departureAirport}\r\n        Preferred Airline: ${formData.preferredAirline || 'Not specified'}\r\n        Room Type: ${formData.roomType}\r\n        Meal Preference: ${formData.mealPreference}\r\n        \r\n        Additional Services:\r\n        Ziyarah Tours in Makkah: ${formData.addZiyarahMakkah ? 'Yes' : 'No'}\r\n        Ziyarah Tours in Madinah: ${formData.addZiyarahMadinah ? 'Yes' : 'No'}\r\n        Direct Flights: ${formData.requestDirectFlights ? 'Yes' : 'No'}\r\n        Private Transport: ${formData.requestPrivateTransport ? 'Yes' : 'No'}\r\n        Travel Insurance: ${formData.addTravelInsurance ? 'Yes' : 'No'}\r\n        \r\n        Special Requests:\r\n        ${formData.specialRequests || 'None'}\r\n        \r\n        This request was submitted on ${new Date().toLocaleString()}\r\n      `;\r\n      \r\n      htmlContent = `\r\n        <h2>New Umrah Package Booking Request</h2>\r\n        <p>A customer has submitted a booking request for an Umrah package.</p>\r\n        \r\n        <h3>Customer Details:</h3>\r\n        <ul>\r\n          <li><strong>Full Name:</strong> ${formData.fullName}</li>\r\n          <li><strong>Email:</strong> ${formData.email}</li>\r\n          <li><strong>Phone:</strong> ${formData.phone}</li>\r\n          <li><strong>Address:</strong> ${formData.address || 'Not provided'}</li>\r\n        </ul>\r\n        \r\n        <h3>Package Details:</h3>\r\n        <ul>\r\n          <li><strong>Package Name:</strong> ${formData.packageName}</li>\r\n          <li><strong>Travel Date:</strong> ${formData.travelDate}</li>\r\n          <li><strong>Travelers:</strong> ${formData.numAdults} adults, ${formData.numChildren} children, ${formData.numInfants} infants</li>\r\n          <li><strong>Departure Airport:</strong> ${formData.departureAirport}</li>\r\n          <li><strong>Preferred Airline:</strong> ${formData.preferredAirline || 'Not specified'}</li>\r\n          <li><strong>Room Type:</strong> ${formData.roomType}</li>\r\n          <li><strong>Meal Preference:</strong> ${formData.mealPreference}</li>\r\n        </ul>\r\n        \r\n        <h3>Additional Services:</h3>\r\n        <ul>\r\n          <li><strong>Ziyarah Tours in Makkah:</strong> ${formData.addZiyarahMakkah ? 'Yes' : 'No'}</li>\r\n          <li><strong>Ziyarah Tours in Madinah:</strong> ${formData.addZiyarahMadinah ? 'Yes' : 'No'}</li>\r\n          <li><strong>Direct Flights:</strong> ${formData.requestDirectFlights ? 'Yes' : 'No'}</li>\r\n          <li><strong>Private Transport:</strong> ${formData.requestPrivateTransport ? 'Yes' : 'No'}</li>\r\n          <li><strong>Travel Insurance:</strong> ${formData.addTravelInsurance ? 'Yes' : 'No'}</li>\r\n        </ul>\r\n        \r\n        <h3>Special Requests:</h3>\r\n        <p style=\"background-color: #f8f9fa; padding: 15px; border-left: 4px solid #dee2e6;\">\r\n          ${formData.specialRequests ? formData.specialRequests.replace(/\\n/g, '<br>') : 'None provided'}\r\n        </p>\r\n        \r\n        <p>This request was submitted on ${new Date().toLocaleString()}</p>\r\n      `;\r\n    } else if (formData.formType === 'beatMyPrice') {\r\n      // Beat My Price form submission\r\n      subject = 'New Beat My Price Quote Request';\r\n      textContent = `\r\n        New Beat My Price Quote Request:\r\n        \r\n        Customer Details:\r\n        Full Name: ${formData.fullName}\r\n        Email: ${formData.email}\r\n        Phone: ${formData.phone}\r\n        \r\n        Trip Details:\r\n        Travel Month: ${formData.travelMonth}\r\n        Duration: ${formData.duration} days\r\n        Number of Guests: ${formData.numberOfGuests}\r\n        Departure City: ${formData.departureCity}\r\n        Accommodation Preference: ${formData.accommodationPreference}\r\n        Current Quote: £${formData.currentQuote}\r\n        \r\n        Additional Information:\r\n        ${formData.packageDetails}\r\n        \r\n        This request was submitted on ${new Date().toLocaleString()}\r\n      `;\r\n      \r\n      htmlContent = `\r\n        <h2>New Beat My Price Quote Request</h2>\r\n        <p>A customer has requested a competitive quote for their travel.</p>\r\n        \r\n        <h3>Customer Details:</h3>\r\n        <ul>\r\n          <li><strong>Full Name:</strong> ${formData.fullName}</li>\r\n          <li><strong>Email:</strong> ${formData.email}</li>\r\n          <li><strong>Phone:</strong> ${formData.phone}</li>\r\n        </ul>\r\n        \r\n        <h3>Trip Details:</h3>\r\n        <ul>\r\n          <li><strong>Travel Month:</strong> ${formData.travelMonth}</li>\r\n          <li><strong>Duration:</strong> ${formData.duration} days</li>\r\n          <li><strong>Number of Guests:</strong> ${formData.numberOfGuests}</li>\r\n          <li><strong>Departure City:</strong> ${formData.departureCity}</li>\r\n          <li><strong>Accommodation Preference:</strong> ${formData.accommodationPreference}</li>\r\n          <li><strong>Current Quote:</strong> £${formData.currentQuote}</li>\r\n        </ul>\r\n        \r\n        <h3>Additional Information:</h3>\r\n        <p style=\"background-color: #f8f9fa; padding: 15px; border-left: 4px solid #dee2e6;\">\r\n          ${formData.packageDetails ? formData.packageDetails.replace(/\\n/g, '<br>') : 'No additional details provided.'}\r\n        </p>\r\n        \r\n        <p>This request was submitted on ${new Date().toLocaleString()}</p>\r\n      `;\r\n    } else {\r\n      // Default booking form submission\r\n      subject = 'New Booking Request from Website';\r\n      textContent = `\r\n        New booking request details:\r\n        \r\n        Departure Date: ${formData.departureDate}\r\n        Departure City: ${formData.departureCity}\r\n        Number of Travelers: ${formData.travelers}\r\n        Number of Nights: ${formData.nights}\r\n        \r\n        Contact Information:\r\n        Full Name: ${formData.fullName}\r\n        Phone: ${formData.phone}\r\n        Email: ${formData.email}\r\n        \r\n        This request was submitted on ${new Date().toLocaleString()}\r\n      `;\r\n      \r\n      htmlContent = `\r\n        <h2>New Booking Request</h2>\r\n        <p>A new booking request has been submitted through the website.</p>\r\n        \r\n        <h3>Travel Details:</h3>\r\n        <ul>\r\n          <li><strong>Departure Date:</strong> ${formData.departureDate}</li>\r\n          <li><strong>Departure City:</strong> ${formData.departureCity}</li>\r\n          <li><strong>Number of Travelers:</strong> ${formData.travelers}</li>\r\n          <li><strong>Number of Nights:</strong> ${formData.nights}</li>\r\n        </ul>\r\n        \r\n        <h3>Contact Information:</h3>\r\n        <ul>\r\n          <li><strong>Full Name:</strong> ${formData.fullName}</li>\r\n          <li><strong>Phone:</strong> ${formData.phone}</li>\r\n          <li><strong>Email:</strong> ${formData.email}</li>\r\n        </ul>\r\n        \r\n        <p>This request was submitted on ${new Date().toLocaleString()}</p>\r\n      `;\r\n    }\r\n    \r\n    // Email options\r\n    const mailOptions = {\r\n      from: process.env.EMAIL_FROM || 'website@m-rtours.co.uk',\r\n      to: toAddress,\r\n      subject: subject,\r\n      text: textContent,\r\n      html: htmlContent,\r\n    };\r\n    \r\n    // Send the email\r\n    const info = await transporter.sendMail(mailOptions);\r\n    console.log('Email sent:', info);\r\n    \r\n    return NextResponse.json({ \r\n      success: true, \r\n      message: 'Email sent successfully' \r\n    });\r\n  } catch (error) {\r\n    console.error('Email sending error:', error);\r\n    return NextResponse.json(\r\n      { \r\n        success: false, \r\n        message: 'Failed to send email',\r\n        error: process.env.NODE_ENV === 'development' ? String(error) : undefined\r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}